!function(){const i=e=>{const t=e.find(".team__content"),n=e.find(".team__item");n.removeClass("active"),t.height(0)};$(".team__title").click(e=>{const t=$(e.currentTarget);e=t.closest(".team");const n=t.closest(".team__item");n.hasClass("active")?i(e):(i(e),(e=>{const t=e.closest(".team__item"),n=t.find(".team__content"),i=n.find(".team__content-block");e=i.height();t.addClass("active"),n.height(e)})(t))})}(),function(){const e=document.querySelector("#hamburger"),t=document.querySelector(".fullscreen-menu"),n=document.querySelector(".fullscreen-menu__close"),i=document.body,r=$(".menu__item");e.addEventListener("click",e=>{e.preventDefault(),t.classList.add("active"),i.classList.add("body-active-menu")}),n.addEventListener("click",e=>{e.preventDefault(),t.classList.remove("active"),i.classList.remove("body-active-menu")}),r.on("click",function(){$(t).hasClass("active")&&(t.classList.remove("active"),i.classList.remove("body-active-menu"))})}(),function(e){"function"==typeof define&&define.amd&&define.amd.jQuery?define(["jquery"],e):e("undefined"!=typeof module&&module.exports?require("jquery"):jQuery)}(function(le){"use strict";function i(e,o){function t(e){if(!(!0===Z.data(Me+"_intouch")||0<le(e.target).closest(o.excludedElements,Z).length)){var t=e.originalEvent||e;if(!t.pointerType||"mouse"!=t.pointerType||0!=o.fallbackToMouseEvents){var n,i=t.touches,r=i?i[0]:t;return B=Ee,i?J=i.length:!1!==o.preventDefaultEvents&&e.preventDefault(),V=X=H=null,F=1,G=z=Q=Y=U=0,(e={})[se]=$(se),e[ce]=$(ce),e[ue]=$(ue),e[de]=$(de),W=e,x(),k(0,r),!i||J===o.fingers||o.fingers===xe||h()?(ee=P(),2==J&&(k(1,i[1]),Q=z=D(K[0].start,K[1].start)),(o.swipeStatus||o.pinchStatus)&&(n=c(t,B))):n=!1,!1===n?(c(t,B=Ce),n):(o.hold&&(oe=setTimeout(le.proxy(function(){Z.trigger("hold",[t.target]),o.hold&&(n=o.hold.call(Z,t,t.target))},this),o.longTapThreshold)),E(!0),null)}}}function n(e){var t,n,i,r,a=e.originalEvent||e;B===Le||B===Ce||S()||(t=L((n=a.touches)?n[0]:a),te=P(),n&&(J=n.length),o.hold&&clearTimeout(oe),B=ke,2==J&&(0==Q?(k(1,n[1]),Q=z=D(K[0].start,K[1].start)):(L(n[1]),z=D(K[0].end,K[1].end),K[0].end,K[1].end,V=F<1?fe:pe),F=(z/Q*1).toFixed(2),G=Math.abs(Q-z)),J===o.fingers||o.fingers===xe||!n||h()?(H=M(t.start,t.end),function(e,t){if(!1!==o.preventDefaultEvents)if(o.allowPageScroll===me)e.preventDefault();else{var n=o.allowPageScroll===he;switch(t){case se:(o.swipeLeft&&n||!n&&o.allowPageScroll!=Te)&&e.preventDefault();break;case ce:(o.swipeRight&&n||!n&&o.allowPageScroll!=Te)&&e.preventDefault();break;case ue:(o.swipeUp&&n||!n&&o.allowPageScroll!=be)&&e.preventDefault();break;case de:(o.swipeDown&&n||!n&&o.allowPageScroll!=be)&&e.preventDefault()}}}(e,X=M(t.last,t.end)),i=t.start,r=t.end,U=Math.round(Math.sqrt(Math.pow(r.x-i.x,2)+Math.pow(r.y-i.y,2))),Y=O(),n=U,(e=H)!=me&&(n=Math.max(n,C(e)),W[e].distance=n),r=c(a,B),o.triggerOnTouchEnd&&!o.triggerOnTouchLeave||(i=!0,o.triggerOnTouchLeave&&(e={left:(n=(e=le(e=this)).offset()).left,right:n.left+e.outerWidth(),top:n.top,bottom:n.top+e.outerHeight()},t=t.end,e=e,i=t.x>e.left&&t.x<e.right&&t.y>e.top&&t.y<e.bottom),!o.triggerOnTouchEnd&&i?B=s(ke):o.triggerOnTouchLeave&&!i&&(B=s(Le)),B!=Ce&&B!=Le||c(a,B))):c(a,B=Ce),!1===r&&c(a,B=Ce))}function i(e){var t,n=e.originalEvent||e,i=n.touches;if(i){if(i.length&&!S())return t=n,ne=P(),ie=t.touches.length+1,!0;if(i.length&&S())return!0}return S()&&(J=ie),te=P(),Y=O(),p()||!d()?c(n,B=Ce):o.triggerOnTouchEnd||!1===o.triggerOnTouchEnd&&B===ke?(!1!==o.preventDefaultEvents&&e.preventDefault(),c(n,B=Le)):!o.triggerOnTouchEnd&&_()?u(n,B=Le,we):B===ke&&c(n,B=Ce),E(!1),null}function r(){z=Q=ee=te=J=0,x(),E(!(F=1))}function a(e){e=e.originalEvent||e;o.triggerOnTouchLeave&&c(e,B=s(Le))}function l(){Z.unbind(q,t),Z.unbind(N,r),Z.unbind(R,n),Z.unbind(j,i),A&&Z.unbind(A,a),E(!1)}function s(e){var t=e,n=f(),i=d(),r=p();return!n||r?t=Ce:!i||e!=ke||o.triggerOnTouchEnd&&!o.triggerOnTouchLeave?!i&&e==Le&&o.triggerOnTouchLeave&&(t=Ce):t=Le,t}function c(e,t){var n,i=e.touches;return(g()&&v()||v())&&(n=u(e,t,ge)),(m()&&h()||h())&&!1!==n&&(n=u(e,t,ve)),b()&&T()&&!1!==n?n=u(e,t,ye):Y>o.longTapThreshold&&U<Se&&o.longTap&&!1!==n?n=u(e,t,_e):1!==J&&$e||!(isNaN(U)||U<o.threshold)||!_()||!1===n||(n=u(e,t,we)),t===Ce&&r(),t===Le&&(i&&i.length||r()),n}function u(e,t,n){var i;if(n==ge){if(Z.trigger("swipeStatus",[t,H||null,U||0,Y||0,J,K,X]),o.swipeStatus&&!1===(i=o.swipeStatus.call(Z,e,t,H||null,U||0,Y||0,J,K,X)))return!1;if(t==Le&&g()){if(clearTimeout(ae),clearTimeout(oe),Z.trigger("swipe",[H,U,Y,J,K,X]),o.swipe&&!1===(i=o.swipe.call(Z,e,H,U,Y,J,K,X)))return!1;switch(H){case se:Z.trigger("swipeLeft",[H,U,Y,J,K,X]),o.swipeLeft&&(i=o.swipeLeft.call(Z,e,H,U,Y,J,K,X));break;case ce:Z.trigger("swipeRight",[H,U,Y,J,K,X]),o.swipeRight&&(i=o.swipeRight.call(Z,e,H,U,Y,J,K,X));break;case ue:Z.trigger("swipeUp",[H,U,Y,J,K,X]),o.swipeUp&&(i=o.swipeUp.call(Z,e,H,U,Y,J,K,X));break;case de:Z.trigger("swipeDown",[H,U,Y,J,K,X]),o.swipeDown&&(i=o.swipeDown.call(Z,e,H,U,Y,J,K,X))}}}if(n==ve){if(Z.trigger("pinchStatus",[t,V||null,G||0,Y||0,J,F,K]),o.pinchStatus&&!1===(i=o.pinchStatus.call(Z,e,t,V||null,G||0,Y||0,J,F,K)))return!1;if(t==Le&&m())switch(V){case pe:Z.trigger("pinchIn",[V||null,G||0,Y||0,J,F,K]),o.pinchIn&&(i=o.pinchIn.call(Z,e,V||null,G||0,Y||0,J,F,K));break;case fe:Z.trigger("pinchOut",[V||null,G||0,Y||0,J,F,K]),o.pinchOut&&(i=o.pinchOut.call(Z,e,V||null,G||0,Y||0,J,F,K))}}return n==we?t!==Ce&&t!==Le||(clearTimeout(ae),clearTimeout(oe),T()&&!b()?(re=P(),ae=setTimeout(le.proxy(function(){re=null,Z.trigger("tap",[e.target]),o.tap&&(i=o.tap.call(Z,e,e.target))},this),o.doubleTapThreshold)):(re=null,Z.trigger("tap",[e.target]),o.tap&&(i=o.tap.call(Z,e,e.target)))):n==ye?t!==Ce&&t!==Le||(clearTimeout(ae),clearTimeout(oe),re=null,Z.trigger("doubletap",[e.target]),o.doubleTap&&(i=o.doubleTap.call(Z,e,e.target))):n==_e&&(t!==Ce&&t!==Le||(clearTimeout(ae),re=null,Z.trigger("longtap",[e.target]),o.longTap&&(i=o.longTap.call(Z,e,e.target)))),i}function d(){var e=!0;return e=null!==o.threshold?U>=o.threshold:e}function p(){var e=!1;return e=null!==o.cancelThreshold&&null!==H?C(H)-U>=o.cancelThreshold:e}function f(){return!(o.maxTimeThreshold&&Y>=o.maxTimeThreshold)}function m(){var e=w(),t=y(),n=null===o.pinchThreshold||G>=o.pinchThreshold;return e&&t&&n}function h(){return o.pinchStatus||o.pinchIn||o.pinchOut}function g(){var e=f(),t=d(),n=w(),i=y();return!p()&&i&&n&&t&&e}function v(){return o.swipe||o.swipeStatus||o.swipeLeft||o.swipeRight||o.swipeUp||o.swipeDown}function w(){return J===o.fingers||o.fingers===xe||!$e}function y(){return 0!==K[0].end.x}function _(){return o.tap}function T(){return!!o.doubleTap}function b(){if(null==re)return!1;var e=P();return T()&&e-re<=o.doubleTapThreshold}function x(){ie=ne=0}function S(){var e=!1;return e=ne&&P()-ne<=o.fingerReleaseThreshold?!0:e}function E(e){Z&&(!0===e?(Z.bind(R,n),Z.bind(j,i),A&&Z.bind(A,a)):(Z.unbind(R,n,!1),Z.unbind(j,i,!1),A&&Z.unbind(A,a,!1)),Z.data(Me+"_intouch",!0===e))}function k(e,t){var n={start:{x:0,y:0},last:{x:0,y:0},end:{x:0,y:0}};return n.start.x=n.last.x=n.end.x=t.pageX||t.clientX,n.start.y=n.last.y=n.end.y=t.pageY||t.clientY,K[e]=n}function L(e){var t=void 0!==e.identifier?e.identifier:0,n=K[t]||null;return(n=null===n?k(t,e):n).last.x=n.end.x,n.last.y=n.end.y,n.end.x=e.pageX||e.clientX,n.end.y=e.pageY||e.clientY,n}function C(e){if(W[e])return W[e].distance}function $(e){return{direction:e,distance:0}}function O(){return te-ee}function D(e,t){var n=Math.abs(e.x-t.x),t=Math.abs(e.y-t.y);return Math.round(Math.sqrt(n*n+t*t))}function M(e,t){if(i=t,(n=e).x==i.x&&n.y==i.y)return me;var n,i,e=(i=t,e=(t=e).x-i.x,t=i.y-t.y,e=Math.atan2(t,e),e=(e=Math.round(180*e/Math.PI))<0?360-Math.abs(e):e);return e<=45&&0<=e||e<=360&&315<=e?se:135<=e&&e<=225?ce:45<e&&e<135?de:ue}function P(){return(new Date).getTime()}var o=le.extend({},o),I=$e||De||!o.fallbackToMouseEvents,q=I?De?Oe?"MSPointerDown":"pointerdown":"touchstart":"mousedown",R=I?De?Oe?"MSPointerMove":"pointermove":"touchmove":"mousemove",j=I?De?Oe?"MSPointerUp":"pointerup":"touchend":"mouseup",A=!I||De?"mouseleave":null,N=De?Oe?"MSPointerCancel":"pointercancel":"touchcancel",U=0,H=null,X=null,Y=0,Q=0,z=0,F=1,G=0,V=0,W=null,Z=le(e),B="start",J=0,K={},ee=0,te=0,ne=0,ie=0,re=0,ae=null,oe=null;try{Z.bind(q,t),Z.bind(N,r)}catch(e){le.error("events not supported "+q+","+N+" on jQuery.swipe")}this.enable=function(){return this.disable(),Z.bind(q,t),Z.bind(N,r),Z},this.disable=function(){return l(),Z},this.destroy=function(){l(),Z.data(Me,null),Z=null},this.option=function(e,t){if("object"==typeof e)o=le.extend(o,e);else if(void 0!==o[e]){if(void 0===t)return o[e];o[e]=t}else{if(!e)return o;le.error("Option "+e+" does not exist on jQuery.swipe.options")}return null}}var se="left",ce="right",ue="up",de="down",pe="in",fe="out",me="none",he="auto",ge="swipe",ve="pinch",we="tap",ye="doubletap",_e="longtap",Te="horizontal",be="vertical",xe="all",Se=10,Ee="start",ke="move",Le="end",Ce="cancel",$e="ontouchstart"in window,Oe=window.navigator.msPointerEnabled&&!window.PointerEvent&&!$e,De=(window.PointerEvent||window.navigator.msPointerEnabled)&&!$e,Me="TouchSwipe";le.fn.swipe=function(e){var t=le(this),n=t.data(Me);if(n&&"string"==typeof e){if(n[e])return n[e].apply(n,Array.prototype.slice.call(arguments,1));le.error("Method "+e+" does not exist on jQuery.swipe")}else if(n&&"object"==typeof e)n.option.apply(n,arguments);else if(!(n||"object"!=typeof e&&e))return function(n){return!n||void 0!==n.allowPageScroll||void 0===n.swipe&&void 0===n.swipeStatus||(n.allowPageScroll=me),void 0!==n.click&&void 0===n.tap&&(n.tap=n.click),n=le.extend({},le.fn.swipe.defaults,n=n||{}),this.each(function(){var e=le(this),t=e.data(Me);t||(t=new i(this,n),e.data(Me,t))})}.apply(this,arguments);return t},le.fn.swipe.version="1.6.18",le.fn.swipe.defaults={fingers:1,threshold:75,cancelThreshold:null,pinchThreshold:20,maxTimeThreshold:null,fingerReleaseThreshold:250,longTapThreshold:500,doubleTapThreshold:200,swipe:null,swipeLeft:null,swipeRight:null,swipeUp:null,swipeDown:null,swipeStatus:null,pinchIn:null,pinchOut:null,pinchStatus:null,click:null,tap:null,doubleTap:null,longTap:null,hold:null,triggerOnTouchEnd:!0,triggerOnTouchLeave:!1,allowPageScroll:"auto",fallbackToMouseEvents:!0,excludedElements:".noSwipe",preventDefaultEvents:!0},le.fn.swipe.phases={PHASE_START:Ee,PHASE_MOVE:ke,PHASE_END:Le,PHASE_CANCEL:Ce},le.fn.swipe.directions={LEFT:se,RIGHT:ce,UP:ue,DOWN:de,IN:pe,OUT:fe},le.fn.swipe.pageScroll={NONE:me,HORIZONTAL:Te,VERTICAL:be,AUTO:he},le.fn.swipe.fingers={ONE:1,TWO:2,THREE:3,FOUR:4,FIVE:5,ALL:xe}}),function(){let n;ymaps.ready(()=>{n=new ymaps.Map("map",{center:[59.949349,30.353162],zoom:12,controls:[]});var t,e=window.matchMedia("(max-width: 768px)");t=e.matches?new ymaps.GeoObjectCollection({},{draggable:!1,iconLayout:"default#image",iconImageHref:"./img/icons/marker.svg",iconImageSize:[43,55],iconImageOffset:[-3,-42]}):new ymaps.GeoObjectCollection({},{draggable:!1,iconLayout:"default#image",iconImageHref:"./img/icons/marker.svg",iconImageSize:[58,73],iconImageOffset:[-3,-42]}),[[59.93991223,30.41813395],[59.96217522,30.29477379],[59.93556572,30.27425277],[59.92774729,30.36055552]].forEach(e=>{t.add(new ymaps.Placemark(e))}),n.geoObjects.add(t),n.behaviors.disable("scrollZoom")})}(),function(){const s=window.matchMedia("(max-width: 480px)").matches,c=window.matchMedia("(max-width: 840px)").matches,r=e=>{const t=e.find(".products-menu__item"),n=e.find(".products-menu__content");t.removeClass("active"),n.width(0)},a=e=>{const t=e.find(".products-menu__content");var n=(e=>{let t=0;var n=$(window).width();const i=e.closest(".products-menu"),r=i.find(".products-menu__title");var a=r.width()*r.length;const o=e.find(".products-menu__content-text");var l=parseInt(o.css("padding-left")),e=parseInt(o.css("padding-right"));return t=s?n-r.width():c?n-a:524,{container:t,textContainer:t-l-e}})(e);const i=e.find(".products-menu__content-text");e.addClass("active"),t.width(n.container),i.width(n.textContainer)};$(".products-menu__title").on("click",e=>{e.preventDefault();const t=$(e.currentTarget),n=t.closest(".products-menu__item");var i=n.hasClass("active"),e=t.closest(".products-menu");i?r(e):(r(e),a(n)),s&&(n.hasClass("active-mobile")?n.removeClass("active-mobile"):n.addClass("active-mobile"))})}(),$(".form").submit(e=>{e.preventDefault();const t=$(e.currentTarget),n=t.find("[name='name']"),i=t.find("[name='phone']"),r=t.find("[name='comment']"),a=t.find("[name='to']"),o=$("#modal"),l=o.find(".modal__content");if(o.removeClass("error-modal"),e=t,[n,i,r,a].forEach(e=>{e.removeClass("form__input--error"),""==e.val().trim()&&e.addClass("form__input--error")}),0==e.find(".form__input--error").length){const s=$.ajax({url:"https://webdev-api.loftschool.com/sendmail",method:"post",data:{name:n.val(),phone:i.val(),comment:r.val(),to:a.val()},error:e=>{}});s.done(e=>{l.text(e.message)}),s.fail(e=>{e=e.responseJSON.message;l.text(e),o.addClass("error-modal")}),s.always(()=>{$.fancybox.open({src:"#modal",type:"inline"})})}}),$(".app-submit-btn").click(e=>{e.preventDefault(),$.fancybox.close()}),function(){const r=$("section"),n=$(".maincontent"),a=$(".fixed-menu"),i=a.find(".fixed-menu__item");let o=!1;const e=new MobileDetect(window.navigator.userAgent);var t=e.mobile();r.first().addClass("active"),$(".fixed-menu__item").first().addClass("fixed-menu__item--active");const l=(e,t,n)=>{e.eq(t).addClass(n).siblings().removeClass(n)},s=e=>{var t;o||(o=!0,t=(e=>{e*=-100;return isNaN(e)?(console.error("передано неверное значение в countSectionPosition"),0):e})(e),(e=>{const t=r.eq(e);var n=t.attr("data-sidemenu-theme"),i="fixed-menu__item--active";a.find(".fixed-menu__item").eq(e).addClass(i).siblings().removeClass(i),"dark"===n?a.addClass("fixed-menu--theme-dark"):a.removeClass("fixed-menu--theme-dark")})(e),n.css({transform:`translateY(${t}%)`}),l(r,e,"active"),setTimeout(()=>{o=!1,l(i,e,"fixed-menu__item--active")},1300))},c=()=>{const e=r.filter(".active"),t=e.next(),n=e.prev();return{next(){t.length&&s(t.index())},prev(){n.length&&s(n.index())}}};$(window).on("wheel",e=>{e=e.originalEvent.deltaY;const t=c();0<e&&t.next(),e<0&&t.prev()}),$(window).on("keydown",e=>{var t=e.target.tagName.toLowerCase(),t="input"==t||"textarea"==t;const n=c();if(!t)switch(e.keyCode){case 38:n.prev();break;case 40:n.next()}}),$(".wrapper").on("touchmove",e=>e.preventDefault()),$("[data-scroll-to]").on("click",e=>{e.preventDefault();const t=$(e.currentTarget);e=t.attr("data-scroll-to");const n=$(`[data-section-id=${e}]`);s(n.index())}),t&&$("body").swipe({swipe:function(e,t){const n=c();let i="down"===t?"prev":"up"===t?"next":"";n[i]()}})}(),function(){const r=document.querySelector(".player"),e=document.querySelector(".player__wrapper"),a=document.querySelector(".player__video"),t=document.querySelector(".player__controls-start"),n=document.querySelector(".player__paused"),i=document.querySelector(".player__playback-line"),o=document.querySelector(".player__playback-circle"),l=document.querySelector(".player__mute"),s=document.querySelector(".player__volume-line"),c=document.querySelector(".player__volume-circle");let u;var d=()=>{a.paused?a.play():a.pause()};t.addEventListener("click",d),n.addEventListener("click",d),e.addEventListener("click",d),a.onplay=()=>{p()},a.onpause=()=>{p("pause")};const p=(e="start")=>{"start"===e?r.classList.add("active"):r.classList.remove("active")};l.addEventListener("click",()=>{r.classList.toggle("muted"),0===a.volume?(a.volume=u,c.style.left=`${100*u}%`):(u=a.volume,a.volume=0,c.style.left="0%")}),s.addEventListener("click",e=>{const t=e.currentTarget;var n=t.getBoundingClientRect().left,i=parseInt(getComputedStyle(t).width),i=(e.pageX-n)/i*100;a.volume=i/100,c.style.left=`${i}%`,0<a.volume&&r.classList.remove("muted")});i.addEventListener("click",e=>{var t=parseInt(getComputedStyle(i).width),n=parseInt(getComputedStyle(o).width),t=(e.offsetX+n/2)*a.duration/t;a.currentTime=t}),a.addEventListener("timeupdate",()=>{var e=a.currentTime/a.duration;o.style.left=`${100*e}%`,a.ended&&(a.currentTime=0)})}(),$(".slider__list").slick({prevArrow:$(".slider__btn--left"),nextArrow:$(".slider__btn--right")}),$(".interactive-avatar__link").click(e=>{e.preventDefault();const t=$(e.currentTarget);var n,e=t.attr("data-open");const i=(n=e,$(".reviews__item").filter((e,t)=>$(t).attr("data-linked-with")==n)),r=t.closest(".reviews__switcher-item");i.addClass("active").siblings().removeClass("active"),r.addClass("active").siblings().removeClass("active")});